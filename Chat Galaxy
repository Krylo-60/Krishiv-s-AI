<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chat Galaxy</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#10a37f">
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
<style>
:root {
  --primary:#10a37f; --bg:#0b1220; --card:#ffffff; --text:#111827;
  --ai:#eef2f7; --user:#2563eb;
}
.dark {--bg:#020617; --card:#020617; --text:#e5e7eb; --ai:#1e293b;}
* {box-sizing:border-box;margin:0;padding:0;}
body {font-family:Segoe UI,system-ui;background:var(--bg);color:var(--text);overflow-x:hidden;position:relative;}
.hidden {display:none;}
#bgCanvas {position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}
.splash {height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;}
.splash-card {background:var(--card);color:var(--text);padding:42px;border-radius:24px;text-align:center;max-width:420px;width:90%;box-shadow:0 30px 60px rgba(0,0,0,.4);transition: transform .3s ease;}
.splash-card:hover {transform: scale(1.03);}
.splash h1 {margin:0;font-size:32px;}
.splash p {opacity:.8;margin:10px 0;}
.start {margin-top:20px;padding:14px 32px;border:none;border-radius:999px;background:var(--primary);color:white;font-size:16px;cursor:pointer;transition:.2s;}
.start:hover {transform:scale(1.05);}
.creator-name {font-weight:bold;color:#10a37f;}
.app {max-width:1100px;margin:24px auto;background:var(--card);border-radius:20px;box-shadow:0 30px 80px rgba(0,0,0,.35);overflow:hidden;}
header {background:linear-gradient(135deg,#0f766e,#10a37f);color:white;padding:16px 22px;font-size:22px;font-weight:700;display:flex;align-items:center;gap:10px;}
nav {display:flex;gap:8px;padding:12px;background:#e5e7eb;flex-wrap:wrap;}
nav button {background:white;border:1px solid #e5e7eb;border-radius:999px;padding:8px 16px;font-weight:600;cursor:pointer;transition:.2s;}
nav button:hover {background:var(--primary);color:white;box-shadow:0 8px 20px rgba(16,163,127,.4);}
.panel {padding:18px;}
.mode {margin-bottom:10px;}
.chat {height:400px;background:linear-gradient(#0b1220,#1c1f2b);border-radius:18px;padding:18px;overflow-y:auto;box-shadow:inset 0 0 0 1px #e5e7eb,0 10px 30px rgba(0,0,0,.1);}
.msg {max-width:75%;padding:12px 14px;border-radius:18px;margin-bottom:10px;line-height:1.5;font-size:15px;white-space: pre-line;word-break: break-word;transition: all .3s ease;}
.user {background:linear-gradient(135deg,#2563eb,#1e40af);color:white;margin-left:auto;}
.ai {background:var(--ai);}
.typing {opacity:.7;font-style:italic;}
.typing::after {content:" â€¢â€¢â€¢";animation:blink 1.4s infinite;}
@keyframes blink{0%{opacity:.2}50%{opacity:1}100%{opacity:.2;}}
.footer {display:flex;gap:8px;background:white;padding:10px;border-radius:18px;margin-top:12px;box-shadow:0 12px 30px rgba(0,0,0,.2);}
input {flex:1;padding:12px;border-radius:12px;border:1px solid #d1d5db;font-size:15px;}
.send {background:var(--primary);color:white;border:none;border-radius:12px;padding:12px 18px;cursor:pointer;}
.voice {background:#ef4444;color:white;border:none;border-radius:12px;padding:12px;cursor:pointer;}
.clear {background:#f59e0b;color:white;border:none;border-radius:12px;padding:12px 18px;cursor:pointer;}
.grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;}
.card {background:white;padding:18px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.1);text-align:center;}
.cert {border:4px solid var(--primary);border-radius:20px;padding:32px;text-align:center;}
.badge {display:inline-block;background:gold;padding:6px 14px;border-radius:999px;margin:6px;font-weight:700;}
.creators-column {margin-top:16px;padding:12px;border:1px solid #10a37f;border-radius:16px;background:#f0fdf4;min-height:40px;text-align:center;}
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>

<!-- SPLASH -->
<div id="splash" class="splash">
  <div class="splash-card">
    <h1>ğŸŒŒ Chat Galaxy</h1>
    <p>Created by <span id="splashCreator" class="creator-name">Nothing Coder Captain Krishiv</span></p>
    <input id="username" placeholder="Enter your name">
    <button class="start" id="startBtn">ğŸš€ Start Chat Galaxy</button>
  </div>
</div>

<!-- APP -->
<div id="app" class="app hidden">
  <header>ğŸŒŒ Chat Galaxy</header>
  <nav>
    <button onclick="show('chatP')">ğŸ’¬ Chat</button>
    <button onclick="show('statsP')">ğŸ“Š Stats</button>
    <button onclick="show('certP')">ğŸ… Certificate</button>
    <button onclick="show('teacherP')">ğŸ” Teacher</button>
    <button onclick="toggleDark()">ğŸŒ™</button>
  </nav>

  <div id="chatP" class="panel">
    <select id="mode" class="mode">
      <option>Normal</option>
      <option>Math Solver</option>
      <option>Homework Helper</option>
    </select>
    <div id="chat" class="chat"></div>
    <div class="footer">
      <input id="input" placeholder="Ask Chat Galaxy..." onkeydown="if(event.key==='Enter') ask()">
      <button class="voice" onclick="voice()">ğŸ¤</button>
      <button class="send" onclick="ask()">Send</button>
      <button class="clear" onclick="clearChat()">ğŸ§¹ Clear</button>
    </div>
  </div>

  <div id="statsP" class="panel hidden">
    <h3 id="statsTitle">ğŸ“Š Usage Statistics</h3>
    <div class="grid">
      <div class="card"><h2 id="uC">0</h2>User Messages</div>
      <div class="card"><h2 id="aC">0</h2>AI Replies</div>
      <div class="card"><h2 id="score">0</h2>Total Score</div>
      <div class="card"><h2 id="xp">0</h2>XP</div>
      <div class="card"><h2 id="level">1</h2>Level</div>
      <div id="badges" class="card">Badges:</div>
    </div>
  </div>

  <div id="certP" class="panel hidden">
    <div class="cert">
      <h2>Certificate of Achievement</h2>
      <h1 id="certName">User</h1>
      <p>has successfully explored</p>
      <h3>Chat Galaxy</h3>
      <p>Created by:</p>
      <div id="creatorsColumn" class="creators-column">Nothing Coder Captain Krishiv</div>
      <span class="badge">ğŸ† AI Explorer</span><br><br>
      <button onclick="window.print()">ğŸ–¨ï¸ Print</button>
    </div>
  </div>

  <div id="teacherP" class="panel hidden">
    <h3>ğŸ” Teacher Dashboard</h3>
    <button onclick="teacherUnlock()">Enter Teacher PIN</button>
    <div id="memorySummary"></div>
  </div>
</div>

<script>
// GALAXY PARTICLES
const canvas=document.getElementById('bgCanvas'),ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
let particles=[];
for(let i=0;i<150;i++){particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2+1,s:Math.random()*0.5+0.2});}
function animateParticles(){ctx.clearRect(0,0,canvas.width,canvas.height);particles.forEach(p=>{ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,2*Math.PI);ctx.fillStyle='rgba(16,163,127,0.6)';ctx.fill();p.x+=p.s;p.y+=p.s;if(p.x>canvas.width)p.x=0;if(p.y>canvas.height)p.y=0;});requestAnimationFrame(animateParticles);}
animateParticles(); window.onresize=()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;};

// CREATORS ANIMATION
const creators=["Nothing Coder Captain Krishiv"];
let splashIndex=0;
const splashCreator=document.getElementById("splashCreator");
const creatorsColumn=document.getElementById("creatorsColumn");
function animateCreators(){splashCreator.innerText=creators[splashIndex];creatorsColumn.innerHTML=creators[splashIndex];splashIndex=(splashIndex+1)%creators.length;}
setInterval(animateCreators,2000);
animateCreators();

// DATA
let data=JSON.parse(localStorage.getItem("chatGalaxy"))||{chat:[],u:0,a:0,username:"",xp:0,level:1,badges:[]};
let userName=data.username||"User";
const chat=document.getElementById("chat"),input=document.getElementById("input");

// START BUTTON
document.getElementById('startBtn').addEventListener('click',()=>{
  const uname=document.getElementById("username").value.trim();
  userName=uname||"User";
  data.username=userName;
  document.getElementById("certName").innerText=userName;
  document.getElementById("statsTitle").innerText=`ğŸ“Š Usage Statistics for ${userName}`;
  localStorage.setItem("chatGalaxy",JSON.stringify(data));
  document.getElementById("splash").style.display="none";
  document.getElementById("app").classList.remove("hidden");
  if(data.chat.length===0)add("ğŸ‘‹ Hi "+userName+"! Welcome to Chat Galaxy.\nSelect a mode and start asking!","ai");
  else load();
  input.focus();
});

// UI
function show(id){["chatP","statsP","certP","teacherP"].forEach(p=>document.getElementById(p).classList.add("hidden"));document.getElementById(id).classList.remove("hidden");}
function toggleDark(){document.body.classList.toggle("dark");}

// CHAT
function add(text,type){const d=document.createElement("div");d.className="msg "+type;d.innerHTML=text;chat.appendChild(d);chat.scrollTop=chat.scrollHeight;if(type==="user") data.u++; else if(type==="ai") data.a++; if(type==="ai") gainXP(10);data.chat.push({text,type});localStorage.setItem("chatGalaxy",JSON.stringify(data));MathJax.typesetPromise();}
function clearChat(){chat.innerHTML="";data.chat=[];data.u=0;data.a=0;update();localStorage.setItem("chatGalaxy",JSON.stringify(data));}
function load(){chat.innerHTML="";data.chat.forEach(m=>add(m.text,m.type));update();}
function update(){document.getElementById("uC").innerText=data.u;document.getElementById("aC").innerText=data.a;document.getElementById("score").innerText=data.u*2+data.a*3;document.getElementById("xp").innerText=data.xp;document.getElementById("level").innerText=data.level;document.getElementById("badges").innerHTML=data.badges.map(b=>`<span class="badge">${b}</span>`).join('');}
function gainXP(x){data.xp+=x;if(data.xp>=data.level*100){data.level++;data.badges.push("â­ Level "+data.level);}update();}

// VOICE
function voice(){const SR=window.SpeechRecognition||window.webkitSpeechRecognition;if(!SR)return alert("Voice not supported");const r=new SR();r.start();r.onresult=e=>input.value=e.results[0][0].transcript;}

// MATH SOLVER
function solveMath(expr){try{expr=expr.replace(/\^/g,'**').replace(/âˆš/g,'Math.sqrt');return eval(expr);}catch{return "Invalid expression";}}

// ASK
function ask(){const q=input.value.trim();if(!q)return;add(q,"user");input.value='';let r='';let delay=800;const mode=document.getElementById('mode').value;if(mode==='Math Solver'){r=`${q} = ${solveMath(q)}`;delay=500;}else{const l=q.toLowerCase();if(/hi|hello|hey/.test(l)) r=`Hello ${userName}! ğŸ‘‹`;else if(/how are you/.test(l)) r="I'm Chat Galaxy, always ready to help! ğŸ˜„";else if(/joke/.test(l)) r="Why did the computer go to the doctor? It caught a virus! ğŸ˜†";else if(/thank\s?you|thanks/.test(l)) r=`You're welcome, ${userName}! ğŸ˜Š`;else if(/bye|see you/.test(l)) r=`Goodbye ${userName}! ğŸ‘‹`;else r=`You asked: ${q}\nThis is a demo AI response.`;}const t=document.createElement('div');t.className='msg ai typing';t.innerText='Chat Galaxy is thinking';chat.appendChild(t);chat.scrollTo({top:chat.scrollHeight,behavior:'smooth'});setTimeout(()=>{t.remove();add(r,'ai');update();},delay);}

// TEACHER
const TEACHER_PIN='21025';
function teacherUnlock(){const pin=prompt("Enter 5-digit Teacher PIN");if(pin===TEACHER_PIN){alert("Teacher mode unlocked!");document.getElementById("memorySummary").innerHTML="Memory summary:<br>"+summarizeMemory();}else alert("Wrong PIN");}
function summarizeMemory(){const topics={};data.chat.forEach(m=>{const k=m.text.split(' ')[0].toLowerCase();topics[k]=(topics[k]||0)+1;});return Object.entries(topics).map(([k,v])=>`${k}: ${v}`).join('<br>');}
</script>
</body>
</html>
